<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.team.mvc.Interface.IAdminDAO">

    <!-- 로그인: ADMIN_ID + ADMIN_PW -->
    <select id="getAdminByIdAndPw" parameterType="com.team.mvc.DTO.AdminDTO" resultType="com.team.mvc.DTO.AdminDTO">
        SELECT
        ADMIN_ID AS adminId,
        ADMIN_PW AS adminPw,
        ADMIN_TEL,
        USER_CODE
        FROM ADMINS
        WHERE ADMIN_ID = #{adminId}
        AND ADMIN_PW = #{adminPw}
    </select>

    <!-- 관리자 등록 -->
    <insert id="insertAdmin" parameterType="com.team.mvc.DTO.AdminDTO">
        INSERT INTO ADMINS (
            ADMIN_ID,
            ADMIN_PW,
            ADMIN_TEL,
            USER_CODE
        )
        VALUES (
                   #{adminId}, #{adminPw}, #{adminTel}, #{userCode}
               )
    </insert>

    <!-- USER_CODE 시퀀스 조회 -->
    <select id="getNextUserCode" resultType="int">
        SELECT USER_CODE_SEQ.NEXTVAL FROM DUAL
    </select>

    <!-- ID 중복 확인 -->
    <select id="getAdminCountById" parameterType="java.lang.String" resultType="int">
        SELECT COUNT(*) FROM ADMINS WHERE ADMIN_ID = #{adminId}
    </select>

</mapper>
